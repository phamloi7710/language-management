$(document).ready(function(){
    $("select.select-locale").select2({
        theme: 'bootstrap4',
        templateResult: function (state) {
            if (!state.id) { return state.text; }
            var $state = $(
                '<span ><img sytle="display: inline-block;" src="/app-assets/language/flags/'+state.element.value.toLowerCase() + '.png"  /> ' + state.text + '</span>'
            );
            return $state;
        }
    });
});
function loadAnimationWhenEditLanguage() {
    $('html, body').animate({
        scrollTop: $('div.load-animation').offset().top - 50
    }, 1000);
    setTimeout(function(){
        $('div.load-animation').addClass('animated bounceIn');
        $('div.load-animation').one('webkitAnimationEnd oanimationend msAnimationEnd animationend',function (e) {
            $('div.load-animation').removeClass('animated bounceIn');
        });
    }, 1000);
}
$('a.delete-language').on('click',function() {
    var langId = $(this).data('id');
    // alert(langId);
    Swal.fire({
        title: language.trans('auth.failed'),
        text: language.trans('auth.failed'),
        type: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: language.trans('auth.failed')
    }).then((result) => {
        if (result.value) {
            $.ajaxSetup({
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                }
            });
            $.ajax({
                url: "/admin/language/"+langId,
                method: 'DELETE',
                success: function(responsive)
                {
                    if ( responsive.status === 'success' ) {
                        $("tr.lang-row-"+langId+"").fadeOut('slow', function() {
                            $(this).remove();
                        });
                        toastr.success(language.trans('auth.failed'), 'Thành Công', {positionClass: 'toast-bottom-right', containerId: 'toast-bottom-right', "progressBar": true, "showMethod": "fadeIn", "hideMethod": "fadeOut", timeOut: 10000}, toastr.options.closeButton = true);
                    }
                    else if ( responsive.status === 'language-not-found' ) {
                        toastr.error('Không Thành Công', 'Ngôn ngữ không tồn tại', {positionClass: 'toast-bottom-right', containerId: 'toast-bottom-right', "progressBar": true, "showMethod": "fadeIn", "hideMethod": "fadeOut", timeOut: 10000}, toastr.options.closeButton = true);
                    }
                }
            })

        }
    })
})
